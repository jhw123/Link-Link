(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,,,function(e,t,a){e.exports=a(23)},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(6),r=a(7),o=a(1),c=a(2),l=a(4),i=a(3),s=a(8),u=a(5),h=a(0),m=a.n(h),k=a(10),v=a.n(k),f=(a(18),a(19),function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"onKeyDown",value:function(e){" "===e.key||32===e.keyCode?this.props.SpaceOnClick():"ArrowRight"===e.key||39===e.keyCode?this.props.RightOnClick():"ArrowLeft"===e.key||37===e.keyCode?this.props.LeftOnClick():"ArrowDown"===e.key||40===e.keyCode?this.props.DownOnClick():console.log(e.key,e.keyCode),e.preventDefault()}},{key:"render",value:function(){return m.a.createElement("div",{className:"ControlPanel"},m.a.createElement("div",null,m.a.createElement("div",{className:"ControlPanel_Text"},"\ube14\ub85d \ud68c\uc804"),m.a.createElement("button",{className:"ControlPanel_key LongKey",onClick:this.props.SpaceOnClick},"SPACEBAR")),m.a.createElement("div",null,m.a.createElement("div",{className:"ControlPanel_Text"},"\uc88c\ub85c \uc774\ub3d9"),m.a.createElement("button",{className:"ControlPanel_key SquareKey",onClick:this.props.LeftOnClick},"\u2b05")),m.a.createElement("div",null,m.a.createElement("div",{className:"ControlPanel_Text"},"\ub0b4\ub9ac\uae30"),m.a.createElement("button",{className:"ControlPanel_key SquareKey",onClick:this.props.DownOnClick},"\u2b07")),m.a.createElement("div",null,m.a.createElement("div",{className:"ControlPanel_Text"},"\uc6b0\ub85c \uc774\ub3d9"),m.a.createElement("button",{className:"ControlPanel_key SquareKey",onClick:this.props.RightOnClick},"\u27a1")))}}]),t}(m.a.Component)),g=(a(20),function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return m.a.createElement("div",{className:"Instruction"},m.a.createElement("h1",null,"\uac8c\uc784 \ubc29\ubc95"),m.a.createElement("div",null,m.a.createElement("img",{className:"Instruction_Img",src:"control.png",alt:"Press 'Spacebar' to rotate a block, Press 'ArrowLeft' to move left, Press 'ArrowRight' to move right."}),m.a.createElement("div",{num:"1."},"\ud68c\uc804, \uc88c\uc6b0 \uc774\ub3d9\uc744 \uc774\uc6a9\ud574 \ub5a8\uc5b4\uc9c0\ub294 \ube14\ub85d\uc744 \uc6c0\uc9c1\uc774\uc138\uc694.")),m.a.createElement("div",null,m.a.createElement("img",{className:"Instruction_Img",src:"chain.png",alt:"Link three equal-colored blocks to remove blocks."}),m.a.createElement("div",{num:"2."},"3\uac1c \uc774\uc0c1\uc758 \uac19\uc740 \uc0c9 \ube14\ub85d\uc744 \uc5f0\uacb0\ud558\uc5ec \ube14\ub85d\uc744 \uc5c6\uc560\uc138\uc694. \ud55c\ubc88\uc5d0 \ub354 \ub9ce\uc740 \ube14\ub85d\uc744 \uc5c6\uc568\uc218\ub85d \ub192\uc740 \uc810\uc218\ub97c \uc5bb\uc2b5\ub2c8\ub2e4.")),m.a.createElement("div",null,m.a.createElement("img",{className:"Instruction_Img",src:"full.png",alt:"Obtain scores until your window is full with blocks."}),m.a.createElement("div",{num:"3."},"\ube14\ub85d\uc774 \ud654\uba74\uc744 \ubaa8\ub450 \ucc44\uc6b0\uae30\uae4c\uc9c0 \ucd5c\ub300\ud55c \ub9ce\uc740 \uc810\uc218 \uc5bb\uc5b4\ubcf4\uc138\uc694!!")))}}]),t}(m.a.Component)),d=a(11);a(21),a(22);function S(e){if(0===e)return"UP";if(1===e)return"RIGHT";if(2===e)return"DOWN";if(3===e)return"LEFT";throw new Error}function b(e){return e.highlightOn?m.a.createElement("div",{className:"Number_Box"},e.number,m.a.createElement("svg",{className:"BorderHighlight",width:"65",height:"65"},m.a.createElement("polygon",{points:"0,0 65,0 65,65 0,65"}))):m.a.createElement("div",{className:"Number_Box"},e.number)}function p(e){var t={background:e.color};if(e.pattern&&e.color){var a=e.pattern.map(function(e){return m.a.createElement("div",{className:"Next_Box_Link "+S(e),style:t,key:e})});return m.a.createElement("div",{className:"Next_Box"},m.a.createElement("div",{className:"Next_Box-Filled",style:t}),a)}return console.log("No next block"),m.a.createElement("div",{className:"Next_Box"})}function y(e){return"Init"===e.gameState?m.a.createElement("button",{className:"START_btn",onClick:e.StartOnClick},"\uc2dc\uc791"):"Running"===e.gameState?m.a.createElement("button",{className:"PAUSE_btn",onClick:e.PauseOnClick},"\uc77c\uc2dc\uc815\uc9c0"):"Pause"===e.gameState?m.a.createElement("button",{className:"RESUME_btn",onClick:e.ResumeOnClick},"\uacc4\uc18d\ud558\uae30"):"Over"===e.gameState?m.a.createElement("button",{className:"RETRY_btn",onClick:e.RetryOnClick},"\uc7ac\uc2dc\uc791"):m.a.createElement("div",null,"GAME STATE UNKNOWN")}var E=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(i.a)(t).call(this,e))).state={stageHighlight:!1,scoreHighlight:!1},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this;this.props.stage!==e.stage&&this.setState({stageHighlight:!0},function(){t.offHighlightInSeconds("stage",3)})}},{key:"offHighlightInSeconds",value:function(e,t){var a=this;this.state["".concat(e,"Highlight")]&&setTimeout(function(){a.setState(Object(d.a)({},"".concat(e,"Highlight"),!1))},1e3*t)}},{key:"render",value:function(){return m.a.createElement("div",{className:"Info_Board"},m.a.createElement("div",{className:"Info_Section"},m.a.createElement("div",{className:"Score_Title"},"\uc810\uc218:"),m.a.createElement(b,{highlightOn:this.state.scoreHighlight,number:this.props.score})),m.a.createElement("div",{className:"Info_Section"},m.a.createElement("div",{className:"Stage_Title"},"\ub2e8\uacc4:"),m.a.createElement(b,{highlightOn:this.state.stageHighlight,number:this.props.stage})),m.a.createElement("div",{className:"Info_Section"},m.a.createElement("div",{className:"Next_Title"},"\ub2e4\uc74c \ube14\ub85d:"),m.a.createElement(p,{color:this.props.color,pattern:this.props.pattern})),m.a.createElement("div",{className:"Info_Section"},m.a.createElement(y,{gameState:this.props.gameState,StartOnClick:this.props.StartOnClick,PauseOnClick:this.props.PauseOnClick,ResumeOnClick:this.props.ResumeOnClick,RetryOnClick:this.props.RetryOnClick})))}}]),t}(m.a.Component),C=6,O=8,N=3,x=["hsl(".concat(0,", ",100,"%, ").concat(60,"%)"),"hsl(".concat(120,", ",100,"%, ").concat(60,"%)"),"hsl(".concat(240,", ",100,"%, ").concat(60,"%)"),"hsl(".concat(60,", ",100,"%, ").concat(60,"%)"),"hsl(".concat(180,", ",100,"%, ").concat(60,"%)"),"hsl(".concat(300,", ",100,"%, ").concat(60,"%)"),"hsl(".concat(30,", ",100,"%, ").concat(60,"%)"),"hsl(".concat(90,", ",100,"%, ").concat(60,"%)"),"hsl(".concat(150,", ",100,"%, ").concat(60,"%)"),"hsl(".concat(210,", ",100,"%, ").concat(60,"%)"),"hsl(".concat(270,", ",100,"%, ").concat(60,"%)"),"hsl(".concat(330,", ",100,"%, ").concat(60,"%)")],w="linear-gradient(to right top, #FF3333,#33FF33,#3333FF,#FFFF33,#33FFFF,#FF33FF, #FF9933)",P=0,B=1,R=2,_=3;function H(e){if(e===P)return"UP";if(e===B)return"RIGHT";if(e===R)return"DOWN";if(e===_)return"LEFT";throw new Error}function I(e){if(e.blockState){var t=e.blockState.color,a=e.blockState.pattern,n={background:t},r=a.map(function(e){return m.a.createElement("div",{className:"Square_Box_Link "+H(e),style:n,key:e})});return m.a.createElement("div",{className:"Square_Box"},m.a.createElement("div",{className:"Square_Box-Filled",style:n}),r)}return m.a.createElement("div",{className:"Square_Box"})}function j(e){var t=e.columnState.map(function(e,t){return m.a.createElement(I,{blockState:e,key:t})});return m.a.createElement("div",{className:"Row"},t)}function L(e){var t={};return"Over"!==e.gameState&&(t={display:"none"}),m.a.createElement("div",{className:"Game_Over",style:t},m.a.createElement("div",{className:"Game_Over_Text"},"GAME OVER!"))}var F=function(e){function t(e){var a;Object(o.a)(this,t),a=Object(l.a)(this,Object(i.a)(t).call(this,e));for(var n=[],r=0;r<O;r++)n.push(Array(C).fill(!1));return a.state={boxState:n,boxStateLock:!1,currentBox:[0,0],colorPool:[x[0],x[1]],colorQueue:[],blockPool:[[R],[B],[R,P],[B,R],[_,B,R],[_,B,R,P]],blockQueue:[],specialBlockProbability:.9,score:0,stage:1,targetScore:50,targetScoreIncrease:50,gameState:"Init"},a.HandleKeyDown=a.HandleKeyDown.bind(Object(s.a)(a)),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"rotateBlock",value:function(e,t,a){if("Running"!==this.state.gameState)return{};var n=this.state.boxState,r=D(n),o=n[e][t].pattern.map(function(e){return(e+(a?1:-1))%4});return r[e][t].pattern=o,{boxState:r}}},{key:"moveCurrentBlock",value:function(e,t,a){var r=this;if(this.state.boxStateLock||"Running"!==this.state.gameState)return{};var o=this.state.boxState,c=D(o),l=e+((a+1)%2?a-1:0),i=t+(a%2?-1*(a-2):0);if(l=Math.max(0,Math.min(O-1,l)),i=Math.max(0,Math.min(C-1,i)),!o[l][i])return c[e][t]=!1,c[l][i]=this.state.boxState[e][t],{boxState:c,currentBox:[l,i]};if(a!==R)return{};this.setState({boxStateLock:!0});var s=function(e,t,a){if(a[e][t]){for(var r=[],o=[[e,t]],c=0;o.length>0&&c<20;){var l=o.shift(),i=Object(n.a)(l,2),s=i[0],u=i[1],h=a[s][u];if(r.push([s,u]),s>0){var m=a[s-1][u];M(h,m,P)&&(A(r,[s-1,u])||o.push([s-1,u]))}if(s<O-1){var k=a[s+1][u];M(h,k,R)&&(A(r,[s+1,u])||o.push([s+1,u]))}if(u>0){var v=a[s][u-1];M(h,v,_)&&(A(r,[s,u-1])||o.push([s,u-1]))}if(u<C-1){var f=a[s][u+1];M(h,f,B)&&(A(r,[s,u+1])||o.push([s,u+1]))}c++}return r.length>=N?(console.log("chained!",c,r),r):[]}throw new Error("Wrong X and Y to check link.")}(e,t,this.state.boxState);this.setState(this.raiseScoreAndRaiseStage(Math.pow(s.length,2))),this.setState(this.deleteBlocks(s),function(){var e=r.getNextDropPosition();-1===e&&r.gameOver();var t=r.getNextBlock();r.setState(r.createNewBlock(0,e,t.pattern,t.color)),r.setState({boxStateLock:!1})})}},{key:"getNextDropPosition",value:function(){var e=[];return this.state.boxState[0].map(function(t,a){return t||e.push(a),a}),0===e.length?-1:e[Math.floor(Math.random()*e.length)]}},{key:"getNextBlock",value:function(){var e=this.state.colorQueue[0],t=this.state.blockQueue[0],a={blockQueue:this.state.blockQueue.slice(1),colorQueue:this.state.colorQueue.slice(1)};return this.state.blockQueue.length<3&&(a.blockQueue=[].concat(Object(r.a)(a.blockQueue),Object(r.a)(this.getNewBlockPattern(this.state.blockPool)))),this.state.colorQueue.length<3&&(a.colorQueue=[].concat(Object(r.a)(a.colorQueue),Object(r.a)(this.getNewColorPattern(this.state.colorPool)))),this.setState(a),{pattern:t,color:e}}},{key:"getNewColorPattern",value:function(e){var t=e.slice();return t.sort(function(){return.5-Math.random()}),Math.random()>this.state.specialBlockProbability?(t.push(w),this.setState({specialBlockProbability:.9})):this.setState({specialBlockProbability:this.state.specialBlockProbability-.1}),t}},{key:"getNewBlockPattern",value:function(e){var t=e.slice();return t.sort(function(){return.5-Math.random()}),t}},{key:"createNewBlock",value:function(e,t,a,n){var r=this.state.boxState,o=D(r);return r[e][t]?{}:(o[e][t]={color:n,pattern:a},{boxState:o,currentBox:[e,t]})}},{key:"deleteBlocks",value:function(e){var t=D(this.state.boxState),a=!0,r=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var i=c.value,s=Object(n.a)(i,2),u=s[0],h=s[1];t[u][h]=!1}}catch(m){r=!0,o=m}finally{try{a||null==l.return||l.return()}finally{if(r)throw o}}return{boxState:t}}},{key:"raiseScoreAndRaiseStage",value:function(e){var t=this.state.score+e;return(!localStorage.getItem("Link-Link-Highest-Score")||localStorage.getItem("Link-Link-Highest-Score")<t)&&localStorage.setItem("Link-Link-Highest-Score",t),this.state.targetScore<=t?(console.log("level up!"),{colorPool:[].concat(Object(r.a)(this.state.colorPool),[x[this.state.stage+1]]),stage:this.state.stage+1,score:t,targetScore:this.state.targetScore+this.state.targetScoreIncrease,targetScoreIncrease:this.state.targetScoreIncrease+50}):{score:t}}},{key:"startGame",value:function(){for(var e=this,t=Math.floor(Math.random()*C-1+1),a=[],n=0;n<O;n++)a.push(Array(C).fill(!1));a[0][t]={color:this.state.colorPool[0],pattern:[R,B]},this.setState({boxState:a,boxStateLock:!1,currentBox:[0,t],colorPool:[x[0],x[1]],colorQueue:[x[0]],blockPool:[[R],[B],[R,P],[B,R],[_,B,R],[_,B,R,P]],blockQueue:[[R,P,B]],specialBlockProbability:.9,score:0,stage:1,targetScore:50,targetScoreIncrease:50,gameState:"Running"},function(){e.interval=setInterval(function(){return e.tick()},1e3)})}},{key:"pauseGame",value:function(){var e=this;this.setState({gameState:"Pause"},function(){clearInterval(e.interval)})}},{key:"resumeGame",value:function(){var e=this;this.setState({gameState:"Running"},function(){e.interval=setInterval(function(){return e.tick()},1e3)})}},{key:"gameOver",value:function(){var e=this;this.setState({gameState:"Over"},function(){console.log("GAME OVER!"),clearInterval(e.interval)})}},{key:"tick",value:function(){console.log("tick");var e=Object(n.a)(this.state.currentBox,2),t=e[0],a=e[1];this.setState(this.moveCurrentBlock(t,a,R))}},{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"RotateHandleClick",value:function(){var e=Object(n.a)(this.state.currentBox,2),t=e[0],a=e[1];this.setState(this.rotateBlock(t,a,!0))}},{key:"MoveHandleClick",value:function(e){var t=Object(n.a)(this.state.currentBox,2),a=t[0],r=t[1];this.setState(this.moveCurrentBlock(a,r,e))}},{key:"StartHandleClick",value:function(){clearInterval(this.interval),this.startGame()}},{key:"PauseHandleClick",value:function(){this.pauseGame()}},{key:"ResumeHandleClick",value:function(){this.resumeGame()}},{key:"RetryHandleClick",value:function(){this.startGame()}},{key:"HandleKeyDown",value:function(e){" "===e.key||32===e.keyCode?this.RotateHandleClick():"ArrowRight"===e.key||39===e.keyCode?this.MoveHandleClick(B):"ArrowLeft"===e.key||37===e.keyCode?this.MoveHandleClick(_):"ArrowDown"===e.key||40===e.keyCode?this.MoveHandleClick(R):console.log(e.key,e.keyCode),e.preventDefault()}},{key:"render",value:function(){var e=this,t=this.state.boxState.map(function(e,t){return m.a.createElement(j,{columnState:e,key:t})});return m.a.createElement("div",{onKeyDown:function(t){return e.HandleKeyDown(t)}},m.a.createElement("div",{className:"Header"},m.a.createElement("div",{className:"Logo"},m.a.createElement("div",{className:"Text"},"LINK-LINK"),m.a.createElement("div",{className:"RedSquare"}),m.a.createElement("div",{className:"BlueSquare"}))),m.a.createElement("div",null,m.a.createElement(g,null),m.a.createElement("div",{className:"Game_Board"},t,m.a.createElement(L,{gameState:this.state.gameState})),m.a.createElement(E,{score:this.state.score,stage:this.state.stage,color:this.state.colorQueue[0],pattern:this.state.blockQueue[0],gameState:this.state.gameState,StartOnClick:function(){return e.StartHandleClick()},PauseOnClick:function(){return e.PauseHandleClick()},ResumeOnClick:function(){return e.ResumeHandleClick()},RetryOnClick:function(){return e.RetryHandleClick()}}),m.a.createElement(f,{SpaceOnClick:function(){return e.RotateHandleClick()},DownOnClick:function(){return e.MoveHandleClick(R)},LeftOnClick:function(){return e.MoveHandleClick(_)},RightOnClick:function(){return e.MoveHandleClick(B)}})))}}]),t}(m.a.Component);function M(e,t,a){var n=(a+2)%4;return!(!(e.pattern.includes(a)&&t&&t.pattern.includes(n))||e.color!==t.color&&e.color!==w&&t.color!==w)}function A(e,t){var a=!0,n=!1,r=void 0;try{for(var o,c=e[Symbol.iterator]();!(a=(o=c.next()).done);a=!0){var l=o.value;if(l[0]===t[0]&&l[1]===t[1])return!0}}catch(i){n=!0,r=i}finally{try{a||null==c.return||c.return()}finally{if(n)throw r}}return!1}function D(e){var t=[],a=!0,n=!1,r=void 0;try{for(var o,c=e[Symbol.iterator]();!(a=(o=c.next()).done);a=!0){var l=o.value;t.push(l.slice())}}catch(i){n=!0,r=i}finally{try{a||null==c.return||c.return()}finally{if(n)throw r}}return t}v.a.render(m.a.createElement(F,null),document.getElementById("root"))}],[[12,1,2]]]);
//# sourceMappingURL=main.5023357a.chunk.js.map